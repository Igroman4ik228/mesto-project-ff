{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-21',\r\n  headers: {\r\n    authorization: 'b0628161-c71c-4e52-9e26-a3e056174f00',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nconst checkResponse = (res) => {\r\n  if (!res.ok)\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  return res.json();\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const updateUserInfo = (userName, userAbout) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: userName,\r\n      about: userAbout\r\n    })\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const updateUserAvatar = (url) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: url\r\n    })\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const addCard = (nameCard, linkCard) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: nameCard,\r\n      link: linkCard\r\n    })\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const removeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const requestLikeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const unlikeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n    .then(res => checkResponse(res));\r\n};\r\n\r\nexport const validateImageUrl = (url) => {\r\n  return fetch(url, {\r\n    method: 'HEAD'\r\n  })\r\n    .then(res => {\r\n      if (!res.ok) {\r\n        return false;\r\n      }\r\n\r\n      const contentType = res.headers.get('Content-Type');\r\n      if (!contentType || !contentType.startsWith('image/')) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    })\r\n    .catch(() => false);\r\n};\r\n","import { requestLikeCard, unlikeCard } from './api.js';\r\n\r\n// Темплейт(шаблон) карточки\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\n\r\n// Функция создания карточки\r\nexport function createCard(cardInfo, cardActions) {\r\n  const { cardData, isOwner, isLiked } = cardInfo;\r\n  const { confirmDeleteCardFunc, likeCardFunc, showCardFunc } = cardActions;\r\n\r\n  const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  const cardTitle = cardElement.querySelector('.card__title')\r\n  const cardImage = cardElement.querySelector('.card__image');\r\n  const likeCount = cardElement.querySelector('.card__like-counter');\r\n\r\n  cardTitle.textContent = cardData.name;\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  likeCount.textContent = cardData.likes.length;\r\n\r\n  cardImage.addEventListener('click', showCardFunc);\r\n\r\n  const cardDeleteButton = cardElement.querySelector('.card__delete-button');\r\n  if (isOwner)\r\n    cardDeleteButton.addEventListener('click', () => confirmDeleteCardFunc(cardElement, cardData._id));\r\n  else\r\n    cardDeleteButton.remove();\r\n\r\n  const cardLike = cardElement.querySelector('.card__like-button');\r\n  if (isLiked)\r\n    cardLike.classList.add('card__like-button_is-active');\r\n  cardLike.addEventListener('click', (evt) => likeCardFunc(evt, likeCount, cardData._id));\r\n\r\n  return cardElement;\r\n};\r\n\r\n// Функция лайка карточки\r\nexport function likeCard(evt, likeCount, cardId) {\r\n  const isLiked = evt.target.classList.contains('card__like-button_is-active');\r\n  const res = isLiked ? unlikeCard(cardId) : requestLikeCard(cardId);\r\n  res.then(res => {\r\n    likeCount.textContent = res.likes.length;\r\n    evt.target.classList.toggle('card__like-button_is-active');\r\n  })\r\n    .catch(err => console.error(err))\r\n};\r\n","// Функция открытия модального окна\r\nexport function openModal(modal) {\r\n  document.addEventListener('keydown', handlePressEscape);\r\n  modal.classList.add('popup_is-opened');\r\n};\r\n\r\n// Функция закрытия модального окна\r\nexport function closeModal(modal) {\r\n  document.removeEventListener('keydown', handlePressEscape);\r\n  modal.classList.remove('popup_is-opened');\r\n};\r\n\r\n// Функция обработки нажатия клавиши Esc\r\nexport function handlePressEscape(evt) {\r\n  if (evt.key === 'Escape') {\r\n    const openModal = document.querySelector('.popup_is-opened');\r\n    closeModal(openModal);\r\n  };\r\n};\r\n\r\n// Функция обработки клика на оверлей или кнопку закрытия\r\nexport function handleOverlayOrCloseBtn(evt) {\r\n  const modal = evt.currentTarget;\r\n  if (evt.target === modal || evt.target.classList.contains('popup__close')) {\r\n    closeModal(modal);\r\n  };\r\n};","function clearValidation(profileForm, validationConfig) {\r\n  const inputList = Array.from(profileForm.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = profileForm.querySelector(validationConfig.submitButtonSelector);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(profileForm,\r\n      inputElement,\r\n      validationConfig.inputErrorClass,\r\n      validationConfig.errorClass);\r\n  });\r\n  toggleButtonState(inputList, buttonElement, validationConfig.inactiveButtonClass);\r\n};\r\n\r\nfunction enableValidation(validationConfig) {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n};\r\n\r\nfunction setEventListeners(formElement, validationConfig) {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig.inactiveButtonClass)\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement,\r\n        inputElement,\r\n        validationConfig.inputErrorClass,\r\n        validationConfig.errorClass);\r\n\r\n      toggleButtonState(inputList, buttonElement, validationConfig.inactiveButtonClass);\r\n    });\r\n  });\r\n};\r\n\r\nfunction checkInputValidity(formElement,\r\n  inputElement,\r\n  inputErrorClass,\r\n  errorClass) {\r\n  if (inputElement.validity.patternMismatch)\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  else\r\n    inputElement.setCustomValidity(\"\");\r\n\r\n  if (!inputElement.validity.valid)\r\n    showInputError(formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      inputErrorClass,\r\n      errorClass);\r\n  else\r\n    hideInputError(formElement,\r\n      inputElement,\r\n      inputErrorClass,\r\n      errorClass);\r\n};\r\n\r\nfunction toggleButtonState(inputList, buttonElement, inactiveButtonClass) {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.classList.add(inactiveButtonClass);\r\n    buttonElement.disabled = true;\r\n  }\r\n  else {\r\n    buttonElement.classList.remove(inactiveButtonClass);\r\n    buttonElement.disabled = false;\r\n  }\r\n\r\n};\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((input) => {\r\n    return !input.validity.valid\r\n  });\r\n};\r\n\r\nfunction showInputError(formElement, inputElement, errorMessage, inputErrorClass, errorClass) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(errorClass);\r\n  inputElement.classList.add(inputErrorClass);\r\n};\r\n\r\nfunction hideInputError(formElement, inputElement, inputErrorClass, errorClass) {\r\n  inputElement.setCustomValidity(\"\");\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  errorElement.textContent = '';\r\n  errorElement.classList.remove(errorClass);\r\n  inputElement.classList.remove(inputErrorClass);\r\n};\r\n\r\n// Обработчик для ошибок валидации ссылок\r\nfunction handleErrorLink(elements, validationConfig,\r\n  message = \"Неверная ссылка на изображение или файл не доступен.\") {\r\n  const { inputElement, linkInputError, submitButton } = elements;\r\n\r\n  linkInputError.textContent = message;\r\n  linkInputError.classList.add(validationConfig.errorClass);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  submitButton.classList.add(validationConfig.inactiveButtonClass);\r\n  submitButton.disabled = true;\r\n};\r\n\r\nexport { clearValidation, enableValidation, handleErrorLink };\r\n\r\n","import { addCard, getInitialCards, getUserInfo, removeCard, updateUserAvatar, updateUserInfo, validateImageUrl } from './components/api.js';\r\nimport { createCard, likeCard } from './components/card.js';\r\nimport { closeModal, handleOverlayOrCloseBtn, openModal } from './components/modal.js';\r\nimport { clearValidation, enableValidation, handleErrorLink } from './components/validation.js';\r\nimport './pages/index.css';\r\n\r\n// DOM узлы\r\nconst placesList = document.querySelector('.places__list');\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst profileAddButton = document.querySelector('.profile__add-button');\r\n\r\nconst profileImage = document.querySelector('.profile__image');\r\nconst profileName = document.querySelector('.profile__title');\r\nconst profileDesc = document.querySelector('.profile__description');\r\n\r\nconst popupTypeEdit = document.querySelector('.popup_type_edit');\r\nconst nameInput = popupTypeEdit.querySelector('.popup__input_type_name');\r\nconst descInput = popupTypeEdit.querySelector('.popup__input_type_description');\r\n\r\nconst popupTypeNewCard = document.querySelector('.popup_type_new-card');\r\nconst placeNameInput = popupTypeNewCard.querySelector('.popup__input_type_card-name');\r\nconst linkInput = popupTypeNewCard.querySelector('.popup__input_type_url');\r\n\r\nconst popupTypeImage = document.querySelector('.popup_type_image');\r\nconst popupImage = popupTypeImage.querySelector('.popup__image');\r\nconst popupCaption = popupTypeImage.querySelector('.popup__caption');\r\n\r\nconst popupTypeAvatar = document.querySelector('.popup_type_avatar');\r\nconst linkInputAvatar = popupTypeAvatar.querySelector('.popup__input_type_url');\r\n\r\nconst popupConfirmDelete = document.querySelector('.popup_type_confirm-delete');\r\n\r\n// Конфигурация валидации\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\nlet infoForDeleteCard = {};\r\n\r\n// Функция подтверждения удаления карточки \r\nconst confirmDeleteCard = (cardElement, cardId) => {\r\n  infoForDeleteCard.elementCardForDelete = cardElement;\r\n  infoForDeleteCard.cardIdForDelete = cardId;\r\n\r\n  openModal(popupConfirmDelete)\r\n};\r\n\r\nconst cardActions = {\r\n  confirmDeleteCardFunc: confirmDeleteCard,\r\n  showCardFunc: showCard,\r\n  likeCardFunc: likeCard\r\n};\r\n\r\n// Функция открытия карточки\r\nfunction showCard(evt) {\r\n  popupImage.src = evt.target.src;\r\n  popupCaption.textContent = evt.target.alt;\r\n\r\n  openModal(popupTypeImage);\r\n};\r\n\r\nfunction handleProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = popupTypeEdit.querySelector(\".popup__button\")\r\n\r\n  renderLoading(submitButton, true)\r\n  // Обновление данных профиля\r\n  updateUserInfo(nameInput.value, descInput.value)\r\n    .then(res => {\r\n      profileName.textContent = res.name;\r\n      profileDesc.textContent = res.about;\r\n\r\n      closeModal(popupTypeEdit);\r\n    })\r\n    .catch(err => console.error(err))\r\n    .finally(() => renderLoading(submitButton, false));\r\n}\r\n\r\nfunction handleAvatarFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = popupTypeAvatar.querySelector(\".popup__button\")\r\n  const url = linkInputAvatar.value\r\n\r\n  renderLoading(submitButton, true)\r\n  // Проверка URL\r\n  validateImageUrl(url)\r\n    .then(isValidUrl => {\r\n      if (!isValidUrl) {\r\n        const linkInputAvatarError = popupTypeAvatar.querySelector(\".link-input-avatar-error\");\r\n\r\n        handleErrorLink({\r\n          inputElement: linkInputAvatar,\r\n          linkInputError: linkInputAvatarError,\r\n          submitButton: submitButton\r\n        }, validationConfig);\r\n        return;\r\n      };\r\n\r\n      // Обновление аватарки профиля\r\n      updateUserAvatar(url)\r\n        .then(res => profileImage.style.backgroundImage = `url(${res.avatar})`)\r\n        .catch(err => console.error(err));\r\n\r\n      closeModal(popupTypeAvatar);\r\n    })\r\n    .catch(err => console.error(err))\r\n    .finally(() => renderLoading(submitButton, false));\r\n};\r\n\r\nfunction handleNewCardFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = popupTypeNewCard.querySelector(\".popup__button\")\r\n  const url = linkInput.value\r\n\r\n  renderLoading(submitButton, true)\r\n  // Проверка URL\r\n  validateImageUrl(url)\r\n    .then(isValidUrl => {\r\n      if (!isValidUrl) {\r\n        const linkInputError = popupTypeNewCard.querySelector(\".link-input-error\");\r\n        handleErrorLink({\r\n          inputElement: linkInput,\r\n          linkInputError: linkInputError,\r\n          submitButton: submitButton\r\n        }, validationConfig);\r\n        return;\r\n      };\r\n\r\n      // Добавление карточки\r\n      addCard(placeNameInput.value, linkInput.value)\r\n        .then(newCardData => {\r\n          const resultCard = createCard({\r\n            cardData: newCardData,\r\n            isOwner: true,\r\n            isLiked: false\r\n          }, cardActions);\r\n          placesList.prepend(resultCard);\r\n\r\n          // Очистка формы\r\n          const newCardForm = popupTypeNewCard.querySelector('.popup__form');\r\n          newCardForm.reset();\r\n          clearValidation(newCardForm, validationConfig);\r\n\r\n          closeModal(popupTypeNewCard);\r\n        })\r\n        .catch(err => console.error(err));\r\n    })\r\n    .catch(err => console.error(err))\r\n    .finally(() => renderLoading(submitButton, false));\r\n};\r\n\r\nfunction handleConfirmDeleteFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = popupConfirmDelete.querySelector(\".popup__button\")\r\n\r\n  renderLoading(submitButton, true, { messageLoading: \"Удаление...\" })\r\n  // Удаление карточки\r\n  removeCard(infoForDeleteCard.cardIdForDelete)\r\n    .then(() => {\r\n      infoForDeleteCard.elementCardForDelete.remove();\r\n      closeModal(popupConfirmDelete);\r\n    })\r\n    .catch(err => console.error(err))\r\n    .finally(() => renderLoading(submitButton, false, { messageBack: \"Да\" }));\r\n};\r\n\r\nfunction renderLoading(submitButton, isLoading,\r\n  { messageLoading = \"Сохранение...\", messageBack = \"Сохранить\" } = {}) {\r\n  submitButton.textContent = isLoading ? messageLoading : messageBack;\r\n}\r\n\r\n// Включение валидации форм\r\nenableValidation(validationConfig);\r\n\r\n// Загрузка начальных данных\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then(([userInfo, initialCards]) => {\r\n    profileImage.style.backgroundImage = `url(${userInfo.avatar})`;\r\n    profileName.textContent = userInfo.name;\r\n    profileDesc.textContent = userInfo.about;\r\n\r\n    initialCards.forEach(cardData => {\r\n      const isOwner = userInfo._id === cardData.owner._id\r\n      const isLiked = cardData.likes.some(like => like._id === userInfo._id);\r\n\r\n      const resultCard = createCard({\r\n        cardData: cardData,\r\n        isOwner: isOwner,\r\n        isLiked: isLiked\r\n      }, cardActions);\r\n      placesList.append(resultCard);\r\n    });\r\n  })\r\n  .catch(err => console.error(err))\r\n\r\n// Слушатель для кнопки редактирования профиля\r\nprofileEditButton.addEventListener('click', () => {\r\n  nameInput.value = profileName.textContent;\r\n  descInput.value = profileDesc.textContent;\r\n\r\n  // Очистка ошибок валидации\r\n  const profileForm = popupTypeEdit.querySelector(\".popup__form\");\r\n  clearValidation(profileForm, validationConfig);\r\n\r\n  openModal(popupTypeEdit);\r\n});\r\n\r\n// Слушатель для кнопки добавления новой карточки\r\nprofileAddButton.addEventListener('click', () => openModal(popupTypeNewCard));\r\n\r\n// Слушатель для кнопки редактирования аватарки\r\nprofileImage.addEventListener('click', () => {\r\n  const imageUrl = profileImage.style.backgroundImage.replace(/url\\([\"']?(.*?)[\"']?\\)/, '$1');\r\n  linkInputAvatar.value = imageUrl;\r\n\r\n  // Очистка ошибок валидации\r\n  const avatarForm = popupTypeAvatar.querySelector(\".popup__form\");\r\n  clearValidation(avatarForm, validationConfig);\r\n\r\n  openModal(popupTypeAvatar)\r\n});\r\n\r\n// Другие слушатели\r\npopupTypeEdit.addEventListener('click', handleOverlayOrCloseBtn);\r\npopupTypeEdit.addEventListener('submit', handleProfileFormSubmit);\r\n\r\npopupTypeAvatar.addEventListener('click', handleOverlayOrCloseBtn);\r\npopupTypeAvatar.addEventListener('submit', handleAvatarFormSubmit);\r\n\r\npopupTypeNewCard.addEventListener('click', handleOverlayOrCloseBtn);\r\npopupTypeNewCard.addEventListener('submit', handleNewCardFormSubmit);\r\n\r\npopupConfirmDelete.addEventListener('click', handleOverlayOrCloseBtn);\r\npopupConfirmDelete.addEventListener('submit', handleConfirmDeleteFormSubmit);\r\n\r\npopupTypeImage.addEventListener('click', handleOverlayOrCloseBtn);\r\n"],"names":["config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","validateImageUrl","url","fetch","method","then","contentType","get","startsWith","catch","cardTemplate","document","querySelector","content","createCard","cardInfo","cardActions","cardData","isOwner","isLiked","confirmDeleteCardFunc","likeCardFunc","showCardFunc","cardElement","cloneNode","cardTitle","cardImage","likeCount","textContent","name","src","link","alt","likes","length","addEventListener","cardDeleteButton","_id","remove","cardLike","classList","add","evt","openModal","modal","handlePressEscape","closeModal","removeEventListener","key","handleOverlayOrCloseBtn","currentTarget","target","contains","clearValidation","profileForm","validationConfig","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","forEach","inputElement","hideInputError","inputErrorClass","errorClass","toggleButtonState","inactiveButtonClass","some","input","validity","valid","hasInvalidInput","disabled","formElement","setCustomValidity","errorElement","id","handleErrorLink","elements","message","arguments","undefined","linkInputError","submitButton","placesList","profileEditButton","profileAddButton","profileImage","profileName","profileDesc","popupTypeEdit","nameInput","descInput","popupTypeNewCard","placeNameInput","linkInput","popupTypeImage","popupImage","popupCaption","popupTypeAvatar","linkInputAvatar","popupConfirmDelete","formSelector","infoForDeleteCard","cardId","elementCardForDelete","cardIdForDelete","unlikeCard","requestLikeCard","toggle","err","console","error","renderLoading","isLoading","_ref","_ref$messageLoading","messageLoading","_ref$messageBack","messageBack","patternMismatch","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation","all","_ref2","_ref3","userInfo","initialCards","style","backgroundImage","avatar","about","owner","like","resultCard","append","value","imageUrl","replace","preventDefault","userName","userAbout","body","JSON","stringify","finally","isValidUrl","updateUserAvatar","linkInputAvatarError","nameCard","linkCard","newCardData","prepend","newCardForm","reset"],"sourceRoot":""}